<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.72.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Project Opacity: Prototype to Production&nbsp;&ndash;&nbsp;Aaron Ogle</title><link rel=stylesheet href=/css/core.min.51a44d5b8886c4d68322a4e7f2c4d3a9ae730b123178c37858c71c49e9bba12bcf142960b0cfe957684d097b1bbfb40d.css integrity=sha384-UaRNW4iGxNaDIqTn8sTTqa5zCxIxeMN4WMccSem7oSvPFClgsM/pV2hNCXsbv7QN><meta name=twitter:card content="summary"><meta name=twitter:title content="Project Opacity: Prototype to Production"><script async defer data-website-id=258570bf-2ff8-4af6-b739-89e886752918 src=https://a-jaguar.fidetech.io/t1.js></script><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">Aaron Ogle</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/>Home</a><a class="nav item" href=/about>About</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Project Opacity: Prototype to Production</h1><p class="article date">2011-02-03</p></section><article class="article markdown-body"><p>About a month ago at work we started a project internally known as Project Opacity.</p><blockquote><p>Opacity by definition: is the quality of being opaque to a degree; the degree to which something reduces the passage of light</p></blockquote><p>Anyways, on to what Project Opacity actually is.  Through out the library there are computer stations from which patrons can access the library catalog.  Which we call Opac&rsquo;s or kiosks.  Come to think of it, this probably is where the name comes from.</p><p>An Old Opac Station
<a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtyudbUbaI/AAAAAAAAAbA/9uBkOxQ8fQU/s1600/2011-01-04+10.45.14.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtyudbUbaI/AAAAAAAAAbA/9uBkOxQ8fQU/s320/2011-01-04+10.45.14.jpg alt="An Old Opac Station"></a></p><p>This was one of the old Opac&rsquo;s.  They were becoming extremely unreliable. Half the time they weren&rsquo;t working.  The graphics on the web page wouldn&rsquo;t show.  Pages took a long time to load.  Most of this is due to the browser being something along the lines of IE4(Ok maybe not. Honestly not sure).  It was winCE based.</p><p>This is the cabinet space below where the thin client was kept.
<a href=https://3.bp.blogspot.com/_BMKBVRf6mio/TUt07O6PkbI/AAAAAAAAAcY/2aH_4lCzdC0/s1600/2011-01-14+16.33.45.jpg target=_blank><img src=https://3.bp.blogspot.com/_BMKBVRf6mio/TUt07O6PkbI/AAAAAAAAAcY/2aH_4lCzdC0/s320/2011-01-14+16.33.45.jpg alt></a></p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt1BoiuV6I/AAAAAAAAAcc/g3zITIoJPPM/s1600/2011-01-14+14.14.27.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt1BoiuV6I/AAAAAAAAAcc/g3zITIoJPPM/s320/2011-01-14+14.14.27.jpg alt></a></p><p>They were using old WYSE thin clients.  I&rsquo;m sure these could have been updated or something.  But I can imagine licensing would have been a pain.  As well has who knows might not have supported this hardware.  Personally really glad to not have to deal with winCE, being a linux guy.</p><p>So my boss hunted around looking into upgrading these.  Custom clients vs updated WYSE type thin clients.  Custom clients won!  Thankfully!  I believe they were same price, if not cheaper with twice the hardware specs.  Operating system:
Linux.  WOOT!  Needless to say,  I got excited about this project.</p><p>So low and behold we have a prototype!!</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt4z3AGryI/AAAAAAAAAdI/U_kUiATfDpE/s1600/2010-12-20+17.28.40.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt4z3AGryI/AAAAAAAAAdI/U_kUiATfDpE/s320/2010-12-20+17.28.40.jpg alt></a></p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt4r7LY36I/AAAAAAAAAdE/MVa8701kLnA/s1600/2010-12-20+16.45.57.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt4r7LY36I/AAAAAAAAAdE/MVa8701kLnA/s320/2010-12-20+16.45.57.jpg alt></a></p><p>Kind of a sexy little machine.  Using CF card for hard drive, Atom processor, and 2 gigs of ram.  Decent setup really.  </p><p>I then spent the better part of a week designing a custom linux install, based on <a href=http://www.linuxmint.com/ target=_blank>linuxmint</a>.  Went through the process of actually making my own install CD.  Very cool stuff!  In the near future I plan on writing a post on doing this.  But for now sticking with Project Opacity, the Hardware side. Believe me, plenty enough to write about!</p><p>So tested it got everything working.  Then, a shocking thing happened. My boss opened the case, looking for a better way to mount the CF to SATA adapter. <em>BOOM!</em> <em>POP</em> <em>POP</em>  Ok, so maybe an exaggeration, but the power supply blew.
  
Long story short, verified it was the power supply, and ordered new one. Around the same time also ordering parts, for the eight needed to replace all the Opac&rsquo;s, in both branches of the library.</p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtyU1WevII/AAAAAAAAAaw/5CKTthN9qgg/s1600/2010-12-29+12.55.53.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtyU1WevII/AAAAAAAAAaw/5CKTthN9qgg/s320/2010-12-29+12.55.53.jpg alt></a></p><p>Cart full of parts for all eight Opac&rsquo;s.</p><p>Then we started building them.  Here are some pictures of the parts and putting them together.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzYqZBsqI/AAAAAAAAAbY/-bCJlQxZP50/s1600/2011-01-06+12.19.07.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzYqZBsqI/AAAAAAAAAbY/-bCJlQxZP50/s320/2011-01-06+12.19.07.jpg alt></a></p><p>8gb CF card.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzoyzIuSI/AAAAAAAAAbk/2ENjFGeInGU/s1600/2011-01-06+12.18.52.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzoyzIuSI/AAAAAAAAAbk/2ENjFGeInGU/s320/2011-01-06+12.18.52.jpg alt></a></p><p>The CF to SATA converter.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzgiX52MI/AAAAAAAAAbg/qMRMPVImJqE/s1600/2011-01-06+12.19.00.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzgiX52MI/AAAAAAAAAbg/qMRMPVImJqE/s320/2011-01-06+12.19.00.jpg alt></a></p><p>2GB Ram.  Yeah I know just ram.  But I took a pic.. </p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtzPCPAWfI/AAAAAAAAAbU/3pWrGRJI19g/s1600/2011-01-06+12.19.30.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtzPCPAWfI/AAAAAAAAAbU/3pWrGRJI19g/s320/2011-01-06+12.19.30.jpg alt></a></p><p>Motherboard with Atom processor on it.</p><p>Now laying the parts out and actually building them.  Yeah I know, some of you are saying, &ldquo;So what?  Been there done that.&rdquo;  If you&rsquo;re that person, go read something else.  Others that don&rsquo;t get the chance to build computers, carry on.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUty2xLkk-I/AAAAAAAAAbE/8EHQUSU_D1g/s1600/2011-01-04+12.51.45.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUty2xLkk-I/AAAAAAAAAbE/8EHQUSU_D1g/s320/2011-01-04+12.51.45.jpg alt></a></p><p>Laid them out.  Ain&rsquo;t it so purdy?  </p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUty-YVRM-I/AAAAAAAAAbI/QpsEkDAfuQk/s1600/2011-01-06+11.58.04.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUty-YVRM-I/AAAAAAAAAbI/QpsEkDAfuQk/s320/2011-01-06+11.58.04.jpg alt></a></p><p>GAh! Wow that was hard.  We went and removed the cases from the box!  :-O<br>Actually in this same step we inventoried them.  I guess that is the significance.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzGqnqu6I/AAAAAAAAAbM/4qGsU2rOEN4/s1600/2011-01-06+12.18.47.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzGqnqu6I/AAAAAAAAAbM/4qGsU2rOEN4/s320/2011-01-06+12.18.47.jpg alt></a></p><p>Open case.</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUtz4k0huiI/AAAAAAAAAbw/PHvYHqteIRw/s1600/2011-01-06+12.39.23.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUtz4k0huiI/AAAAAAAAAbw/PHvYHqteIRw/s320/2011-01-06+12.39.23.jpg alt></a></p><p>The motherboard in, and power supply in place.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzwsal6qI/AAAAAAAAAbs/O0vjdicS1VY/s1600/2011-01-06+12.39.16.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUtzwsal6qI/AAAAAAAAAbs/O0vjdicS1VY/s320/2011-01-06+12.39.16.jpg alt></a></p><p>Everything hooked up and ready.  Well almost..</p><p><a href=https://3.bp.blogspot.com/_BMKBVRf6mio/TUt0BddxyJI/AAAAAAAAAb0/VVhcAmYjMmQ/s1600/2011-01-06+14.34.58.jpg target=_blank><img src=https://3.bp.blogspot.com/_BMKBVRf6mio/TUt0BddxyJI/AAAAAAAAAb0/VVhcAmYjMmQ/s320/2011-01-06+14.34.58.jpg alt></a></p><p>CF to SATA adapter mounted. Using power tools as an IT Assistant?? Who would have thought?</p><p>To mount the adapter, we drilled three holes through the top of the CD/Hard-drive bay. Then we used motherboard standoffs, nuts, and screws to raise it away from the metal, preventing shorting.</p><p><a href=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt0UeGloxI/AAAAAAAAAcA/0pO-7kBFyJA/s1600/2011-01-06+15.21.32.jpg target=_blank><img src=https://4.bp.blogspot.com/_BMKBVRf6mio/TUt0UeGloxI/AAAAAAAAAcA/0pO-7kBFyJA/s320/2011-01-06+15.21.32.jpg alt></a></p><p>Done?  No, not exactly.  One thing we forgot about completely, was how it would be fit into the cabinet.  Turns out, it didn&rsquo;t fit like we thought it would. So for the ones mounted on the poles(4 of them), we had to make some modifications.</p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtydKPai0I/AAAAAAAAAa0/BEMk6Z1k5TM/s1600/2011-01-13+17.26.43.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtydKPai0I/AAAAAAAAAa0/BEMk6Z1k5TM/s320/2011-01-13+17.26.43.jpg alt></a></p><p>Two holes drilled where the legs normally would be glued.</p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtylkLXiqI/AAAAAAAAAa4/i7IOKSjHDZI/s1600/2011-01-13+17.37.59.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtylkLXiqI/AAAAAAAAAa4/i7IOKSjHDZI/s320/2011-01-13+17.37.59.jpg alt></a></p><p>Nuts & Bolts through strips of copper</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0jkuSwuI/AAAAAAAAAcI/Kkr0k9_mNQ4/s1600/2011-01-14+14.07.03.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0jkuSwuI/AAAAAAAAAcI/Kkr0k9_mNQ4/s320/2011-01-14+14.07.03.jpg alt></a></p><p>View from the inside.  Yes had to remove the motherboard&rsquo;s.
Was kind of annoying.  But you do what you got to do.</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0y6bxc4I/AAAAAAAAAcU/6qI2jAFPpVk/s1600/2011-01-14+17.04.58.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0y6bxc4I/AAAAAAAAAcU/6qI2jAFPpVk/s320/2011-01-14+17.04.58.jpg alt></a></p><p>Then we hung these bad boys!</p><p>A lot of hacking, but we got them in.  Next I had to flash/clone the CF cards.</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0rrjvOoI/AAAAAAAAAcM/nFuaM450E04/s1600/2011-01-07+13.45.57.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt0rrjvOoI/AAAAAAAAAcM/nFuaM450E04/s320/2011-01-07+13.45.57.jpg alt></a></p><p>Prototype, being prototype?</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1S5mX96I/AAAAAAAAAco/Jv7ixJ6FkTg/s1600/2011-01-07+16.57.25.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1S5mX96I/AAAAAAAAAco/Jv7ixJ6FkTg/s320/2011-01-07+16.57.25.jpg alt></a></p><p>First attempt.</p><p>As with anything in this project, cloning the cards was a learning experience. At first we planned on using the CD I created and installing on each. Which would have worked fine.  After turning it on, no interaction was needed for installation.  But still that&rsquo;s a lot of work, and lets face it.  CD drives are fast&mldr; But they are still so, slow!</p><p>So the cloning route seemed more appealing.  As seen in the screenshot, I booted from a cd, created a disc image, compressed it, then uncompressed and DD(the disk copy command in linux) to card.  Not sure why this didn&rsquo;t work.  Next just copied directly from one disc to another.</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1IhYqK8I/AAAAAAAAAcg/FNczc8hWaJM/s1600/2011-01-07+16.18.16.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1IhYqK8I/AAAAAAAAAcg/FNczc8hWaJM/s320/2011-01-07+16.18.16.jpg alt></a></p><p>Direct copying from sda to sdb.
Worked great!  Done using:</p><pre><code>dd if=/dev/sda bs=256M of=/dev/sdb
</code></pre><p>For those that don&rsquo;t know how dd works.  if=/dev/sda  &ldquo;if&rdquo; stands for input
file.  Everything in linux is a file.  Topic for another time.  &ldquo;/dev/sda&rdquo;
is the path or file where the source disc that you want to copy from is.  
&ldquo;bs=256M&rdquo;  aka byte size equals 256 megabytes.  The size of the blocks you want copied.  Seems the bigger byte size the faster it transfers.  It transfers
it in 256mb chunks.  Finally &ldquo;of=/dev/sdb&rdquo;. Like the first parameter &ldquo;of&rdquo; is output file, and &ldquo;/dev/sdb&rdquo; is the output file or destination disc.  </p><p>If you have only two discs first disc being in SATA1 and second in SATA2 this is probably correct for you.  Check first!!! You get these backwards and you&rsquo;re gonna wipe out your source
disc.  Be careful!</p><p>Think before you do, and you&rsquo;ll be fine.  Now we just simply installed the CF cards.</p><p><a href=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1dAOuXqI/AAAAAAAAAcs/VdeUjzHcA0A/s1600/2011-01-12+13.43.19.jpg target=_blank><img src=https://2.bp.blogspot.com/_BMKBVRf6mio/TUt1dAOuXqI/AAAAAAAAAcs/VdeUjzHcA0A/s320/2011-01-12+13.43.19.jpg alt></a></p><p>CF card being put in.
Finally!  Power them up!</p><p><a href=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtyAN1SkAI/AAAAAAAAAas/seTsepqF-84/s1600/2011-01-18+14.34.02.jpg target=_blank><img src=https://1.bp.blogspot.com/_BMKBVRf6mio/TUtyAN1SkAI/AAAAAAAAAas/seTsepqF-84/s320/2011-01-18+14.34.02.jpg alt></a></p><p>Opac interface Software fully operational.  Still making some little tweaks to make the experience better. </p><p>A couple of the key things that make this solution ideal:</p><p>Its linux!  The sky is the limit.  With just a few clicks was able to fully lock this down.  Can&rsquo;t close the window, log out, or do malicious things to the system.</p><p>All and all, I think we did an excellent job!</p><p>Next, figuring out how to update them all at once.  <a href=http://www.puppetlabs.com/ target=_blank>Puppet</a> maybe? Been dying to try it out</p><h4 id=updates>Updates</h4><p>09/30/2019: Switched images links to https</p></article><section class="article labels"><a class=tag href=/tags/hardware/>hardware</a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/2011/02/20/ipv6-connectivity-in-ubuntu-setting-up/><span class="iconfont icon-article"></span>IPv6 Connectivity in Ubuntu: Setting up</a></p><p><a class=link href=/2011/01/04/destroying-a-hard-drive/><span class="iconfont icon-article"></span>Destroying a hard drive</a></p></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>Aaron Ogle</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section></body></html>